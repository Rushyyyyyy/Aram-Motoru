<div id="app"></div>

<style>
body{
  margin:0;
  background:#000;
  font-family:Arial;
  color:#00ff9c;
}

.card{
  width:340px;
  margin:80px auto;
  padding:28px;
  background:#020a07;
  border-radius:20px;
  border:1px solid #00ff9c;
  box-shadow:0 0 30px #00ff9c;
  text-align:center;
}

input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  background:#000;
  border:1px solid #00ff9c;
  color:#00ff9c;
  border-radius:12px;
}

button{
  background:#00ff9c;
  color:#001a10;
  font-weight:bold;
  cursor:pointer;
}

.result{
  margin-top:10px;
  padding:12px;
  border:1px solid #00ff9c;
  border-radius:12px;
}
</style>

<script>
const API = "https://rush-license-system.vercel.app/arama-motoru/licenses.json";

document.getElementById("app").innerHTML = `
  <div class="card">
    <h2>Rush Shop</h2>
    <input id="nick" placeholder="Nickname">
    <input id="pass" type="password" placeholder="≈ûifre">
    <button onclick="login()">Giri≈ü</button>
    <div id="msg"></div>
  </div>
`;

async function login(){
  const nick = nick.value;
  const pass = pass.value;
  const msg = document.getElementById("msg");

  try{
    const r = await fetch(API+"/api/login",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({nickname:nick,password:pass})
    });
    const d = await r.json();
    if(!d.success) return msg.innerText="‚ùå "+d.error;

    showSearch();
  }catch{
    msg.innerText="‚ùå Sunucuya baƒülanƒ±lamadƒ±";
  }
}

function showSearch(){
  document.getElementById("app").innerHTML = `
    <div class="card">
      <h2>üîé Arama</h2>
      <input id="q" placeholder="Ara...">
      <button onclick="search()">Ara</button>
      <div id="results"></div>
    </div>
  `;
}

async function search(){
  const q = document.getElementById("q").value;
  const rbox = document.getElementById("results");
  rbox.innerText="Aranƒ±yor...";

  try{
    const r = await fetch(API+"/api/search?q="+encodeURIComponent(q));
    const d = await r.json();
    rbox.innerHTML="";
    d.results.forEach(x=>{
      rbox.innerHTML+=`
        <div class="result">
          <b>${x.title}</b><br>
          <a href="${x.url}" target="_blank">${x.url}</a>
        </div>
      `;
    });
  }catch{
    rbox.innerText="‚ùå Sunucu hatasƒ±";
  }
}
</script>
